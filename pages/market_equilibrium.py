# pages/market_equilibrium.py

import streamlit as st
import plotly.graph_objects as go

st.set_page_config(page_title="โ๏ธ ุชูุงุฒู ุงูุณูู", layout="centered")

st.title("โ๏ธ ุชูุงุฒู ุงูุณูู")

# ูุนุงุฏูุงุช ุงูุนุฑุถ ูุงูุทูุจ
def quantity_demanded(p): return 100 - 10 * p
def quantity_supplied(p): return 20 + 10 * p

price = st.slider("ุงุฎุชุฑ ุงูุณุนุฑ:", min_value=1, max_value=10, value=5)

qd = quantity_demanded(price)
qs = quantity_supplied(price)

# ุชุญููู ุงูุญุงูุฉ
if qd > qs:
    st.warning(f"๐ ููุงู **ููุต** ูู ุงูุณูู: ุงูุทูุจ ({qd}) > ุงูุนุฑุถ ({qs})")
    st.markdown(
        """
        ๐ ุนูุฏูุง ุชููู ุงููููุฉ ุงููุทููุจุฉ ุฃูุจุฑ ูู ุงููููุฉ ุงููุนุฑูุถุฉุ ูุธูุฑ ููุต ูู ุงูุณูู.  
        ูุฐุง ูุคุฏู ุฅูู ุชูุงูุณ ุงููุดุชุฑููุ ููุง ูุฏูุน ุงูุณุนุฑ **ููุงุฑุชูุงุน** ุชุฏุฑูุฌููุง.  
        ููุน ุงุฑุชูุงุน ุงูุณุนุฑ:
        - **ููุฎูุถ ุงููููุฉ ุงููุทููุจุฉ**
        - **ุชุฒุฏุงุฏ ุงููููุฉ ุงููุนุฑูุถุฉ**
        
        ุฅูู ุฃู ูุชุณุงูู ุงููููุฉ ุงููุทููุจุฉ  ูุน ุงููููุฉ ุงููุนุฑูุถุฉุ ููุนูุฏ ุงูุณูู ุฅูู **ุงูุชูุงุฒู**.
        """
    )

elif qs > qd:
    st.info(f"๐ ููุงู **ูุงุฆุถ** ูู ุงูุณูู: ุงูุนุฑุถ ({qs}) > ุงูุทูุจ ({qd})")
    st.markdown(
        """
        ๐ฆ ุนูุฏูุง ูููู ุงููููุฉ ุงููุนุฑูุถุฉ ุฃูุจุฑ ูู ุงููููุฉ ุงููุทููุจุฉ ุ ูุชุฑุงูู ูุงุฆุถ ูู ุงูุณูุน.  
        ูุญุงูู ุงูุจุงุฆุนูู ุงูุชุฎูุต ูู ุงููููุฉ ุงูุฒุงุฆุฏุฉุ ููุง ูุฏูุน ุงูุณุนุฑ **ููุงูุฎูุงุถ**.  
        ููุน ุงูุฎูุงุถ ุงูุณุนุฑ:
        - **ุชุฒุฏุงุฏ ุงููููุฉ ุงููุทููุจุฉ**
        - **ุชูุฎูุถ ุงููููุฉ ุงููุนุฑูุถุฉ**
        
        ุญุชู ูุตู ุงูุณูู ุฅูู **ููุทุฉ ุงูุชูุงุฒู**.
        """
    )

else:
    st.success(f"โ ุงูุณุนุฑ {price} ูู **ุณุนุฑ ุงูุชูุงุฒู**! ุงูุนุฑุถ = ุงูุทูุจ = {qs}")
    st.markdown(
        """
        โ๏ธ ุนูุฏ ุณุนุฑ ุงูุชูุงุฒูุ ุชููู ุงููููุฉ ุงููุทููุจุฉ ูุณุงููุฉ ุชูุงููุง ูููููุฉ ุงููุนุฑูุถุฉ.  
        ูุง ููุฌุฏ ูุงุฆุถ ุฃู ููุตุ ูุจุงูุชุงูู ูุง ููุฌุฏ ุถุบุท ูุฑูุน ุฃู ุฎูุถ ุงูุณุนุฑ.  
        ุงูุณูู ูู **ุงุณุชูุฑุงุฑ**ุ ููุฐู ูู ุงูุญุงูุฉ ุงููุซุงููุฉ!
        """
    )

# ุฑุณู ุจูุงูู (ูููุฉ ูู xุ ุณุนุฑ ูู y)
prices = list(range(1, 11))
demand_quantities = [quantity_demanded(p) for p in prices]
supply_quantities = [quantity_supplied(p) for p in prices]

fig = go.Figure()
fig.add_trace(go.Scatter(x=demand_quantities, y=prices, mode='lines+markers', name='ุงูุทูุจ'))
fig.add_trace(go.Scatter(x=supply_quantities, y=prices, mode='lines+markers', name='ุงูุนุฑุถ'))
fig.add_hline(y=price, line_dash="dot", line_color="gray")

fig.update_layout(
    title="ููุญููู ุงูุนุฑุถ ูุงูุทูุจ (ุงูุณุนุฑ ุนูู ุงููุญูุฑ ุงูุฑุฃุณู)",
    xaxis_title="ุงููููุฉ",
    yaxis_title="ุงูุณุนุฑ"
)

st.plotly_chart(fig, use_container_width=True)
